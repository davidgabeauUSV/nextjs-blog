{"ast":null,"code":"import { magic } from '../../lib/magic';\nimport { removeTokenCookie } from '../../lib/auth-cookies';\nimport { getSession } from '../../lib/iron';\nexport default async function logout(req, res) {\n  const session = await getSession(req);\n  await magic.users.logoutByIssuer(session.issuer);\n  removeTokenCookie(res);\n  res.writeHead(302, {\n    Location: '/'\n  });\n  res.end();\n}","map":{"version":3,"sources":["/Users/davidgabeau/Desktop/glo/nextjs-blog/with-magic-app/pages/api/logout.js"],"names":["magic","removeTokenCookie","getSession","logout","req","res","session","users","logoutByIssuer","issuer","writeHead","Location","end"],"mappings":"AAAA,SAASA,KAAT,QAAsB,iBAAtB;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,UAAT,QAA2B,gBAA3B;AAEA,eAAe,eAAeC,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAC7C,QAAMC,OAAO,GAAG,MAAMJ,UAAU,CAACE,GAAD,CAAhC;AACA,QAAMJ,KAAK,CAACO,KAAN,CAAYC,cAAZ,CAA2BF,OAAO,CAACG,MAAnC,CAAN;AACAR,EAAAA,iBAAiB,CAACI,GAAD,CAAjB;AACAA,EAAAA,GAAG,CAACK,SAAJ,CAAc,GAAd,EAAmB;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAnB;AACAN,EAAAA,GAAG,CAACO,GAAJ;AACD","sourcesContent":["import { magic } from '../../lib/magic'\nimport { removeTokenCookie } from '../../lib/auth-cookies'\nimport { getSession } from '../../lib/iron'\n\nexport default async function logout(req, res) {\n  const session = await getSession(req)\n  await magic.users.logoutByIssuer(session.issuer)\n  removeTokenCookie(res)\n  res.writeHead(302, { Location: '/' })\n  res.end()\n}\n"]},"metadata":{},"sourceType":"module"}